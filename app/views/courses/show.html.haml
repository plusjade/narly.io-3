#top-bar
  %a.toc-toggle{ href: "#" } &#12448;
  #prev-next
    %a.prev{ href: "#" } &#9664;
    %a.next{ href: "#" } &#9654;
#world
#main-commit-container

= render partial: "templates/main-commit"

- content_for :page_javascripts do
  :plain
    Narly.env.commits = new Narly.Commits(#{ @repo.commits.to_json.html_safe });
    Narly.env.commits.courseName = '#{ @repo.name }';
    var $tableOfContents = new Narly.CommitsView({ collection: Narly.env.commits })
    $("body").append($tableOfContents.render());
    new Narly.TopBar({ el: '#top-bar' });
    new Narly.PrevNextView({ el: '#prev-next', collection: Narly.env.commits });
    Narly.env.commits.at(#{ @index.to_i }).fetch();
